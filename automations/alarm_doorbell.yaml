###############################################
### Ringklocka tvättstuga dag               ###
### T: switch.ringklocka_tvattstuga == on   ###
### C: input_select.home_status == Hemma på ###
### A: switch.ringklocka_tvattstuga = off   ###
###    notify.pushbullet                    ###
###############################################
  - alias: Ringklocka tvättstuga dag
    id: '4680276550082' 

    trigger:
      platform: state
      entity_id: switch.ringklocka_tvattstuga
      to: 'on'

    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: input_select.home_status
          state: 'Hemma på'

    action:
      - service: homeassistant.turn_off
        entity_id: switch.ringklocka_tvattstuga
      - delay:
          seconds: 5
      - service: notify.pushbullet
        data:
          title: "{{ now().strftime('%Y-%m-%d %H:%M:%S') }}"
          message: "Ringklocka tvättstuga, dag"
          data:
            file: /media/Day/camera_3_latest.jpg
      - delay:
          seconds: 10

###############################################
### Ringklocka tvättstuga natt              ###
### T: switch.ringklocka_tvattstuga == on   ###
### C: input_select.home_status == Hemma av ###
### A: switch.ringklocka_tvattstuga = off   ###
###    notify.pushbullet                    ###
###############################################
  - alias: Ringklocka tvättstuga natt
    id: '8581808842331' 

    trigger:
      platform: state
      entity_id: switch.ringklocka_tvattstuga
      to: 'on'

    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: input_select.home_status
          state: 'Hemma av'

    action:
      - service: homeassistant.turn_off
        entity_id: switch.ringklocka_tvattstuga
      - delay:
          seconds: 5
      - service: notify.pushbullet
        data:
          title: "{{ now().strftime('%Y-%m-%d %H:%M:%S') }}"
          message: "Ringklocka tvättstuga, natt"
          data:
            file: /media/Night/camera_3_latest.jpg
      - delay:
          seconds: 10

#############################################
### Ringklocka tvättstuga borta           ###
### T: switch.ringklocka_tvattstuga == on ###
### C: input_select.home_status == borta  ###
### A: switch.ringklocka_tvattstuga = off ###
###    notify.pushbullet                  ###
#############################################
  - alias: Ringklocka tvättstuga borta
    id: '8856227519117' 

    trigger:
      platform: state
      entity_id: switch.ringklocka_tvattstuga
      to: 'on'

    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: input_select.home_status
          state: 'borta'

    action:
      - service: homeassistant.turn_off
        entity_id: switch.ringklocka_tvattstuga
      - delay:
          seconds: 5
      - service: notify.pushbullet
        data:
          title: "{{ now().strftime('%Y-%m-%d %H:%M:%S') }}"
          message: "Ringklocka tvättstuga, borta"
          data:
            file: /media/Away/camera_3_latest.jpg
      - delay:
          seconds: 10

###############################################
### Ringklocka hall dag                     ###
### T: switch.ringklocka_hall == on         ###
### C: input_select.home_status == Hemma på ###
### A: switch.ringklocka_hall = off         ###
###    notify.pushbullet                    ###
###############################################
  - alias: Ringklocka hall dag
    id: '2011937267368' 

    trigger:
      platform: state
      entity_id: switch.ringklocka_hall
      to: 'on'

    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: input_select.home_status
          state: 'Hemma på'

    action:
      - service: homeassistant.turn_off
        entity_id: switch.ringklocka_hall
      - delay:
          seconds: 5
      - service: notify.pushbullet
        data:
          title: "{{ now().strftime('%Y-%m-%d %H:%M:%S') }}"
          message: "Ringklocka hall, dag"
          data:
            file: /media/Day/camera_2_latest.jpg
      - delay:
          seconds: 10

###############################################
### Ringklocka hall natt                    ###
### T: switch.ringklocka_hall == on         ###
### C: input_select.home_status == Hemma av ###
### A: switch.ringklocka_hall = off         ###
###    notify.pushbullet                    ###
###############################################
  - alias: Ringklocka hall natt
    id: '7558417871695' 

    trigger:
      platform: state
      entity_id: switch.ringklocka_hall
      to: 'on'

    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: input_select.home_status
          state: 'Hemma av'

    action:
      - service: homeassistant.turn_off
        entity_id: switch.ringklocka_hall
      - delay:
          seconds: 5
      - service: notify.pushbullet
        data:
          title: "{{ now().strftime('%Y-%m-%d %H:%M:%S') }}"
          message: "Ringklocka hall, natt"
          data:
            file: /media/Night/camera_2_latest.jpg
      - delay:
          seconds: 10

############################################
### Ringklocka hall borta                ###
### T: switch.ringklocka_hall == on      ###
### C: input_select.home_status == borta ###
### A: switch.ringklocka_hall = off      ###
###    notify.pushbullet                 ###
############################################
  - alias: Ringklocka hall borta
    id: '7706419791465' 

    trigger:
      platform: state
      entity_id: switch.ringklocka_hall
      to: 'on'

    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: input_select.home_status
          state: 'borta'

    action:
      - service: homeassistant.turn_off
        entity_id: switch.ringklocka_hall
      - delay:
          seconds: 5
      - service: notify.pushbullet
        data:
          title: "{{ now().strftime('%Y-%m-%d %H:%M:%S') }}"
          message: "Ringklocka hall, borta"
          data:
            file: /media/Away/camera_2_latest.jpg
      - delay:
          seconds: 10

  ##############################################
  ### Blinka med lyset när ringklocka ringer ###
  ##############################################
  - alias: Blinka med lyset när ringklocka ringer
    id: '8363608373239' 
    mode: single

    trigger:
      - platform: state
        entity_id: switch.ringklocka_tvattstuga
        to: 'on'
      - platform: state
        entity_id: switch.ringklocka_hall
        to: 'on'

    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: group.track_for_home_devices
          state: 'home'

    action:
      - service: light.toggle
        entity_id: light.vardagsrum_vitrinskap
      - delay:
          seconds: 1
      - service: light.toggle
        entity_id: light.vardagsrum_vitrinskap
      - delay:
          seconds: 1
      - service: light.toggle
        entity_id: light.vardagsrum_vitrinskap
      - delay:
          seconds: 1
      - service: light.toggle
        entity_id: light.vardagsrum_vitrinskap

#####################################################
### Ringklocka tänd allt lyse och tv 1            ###
### T: switch.ringklocka_tvattstuga == on         ###
###    switch.ringklocka_hall == on               ###
### C: group.track_for_home_devices == 'not_home' ###
###    light.kok_lilla_fonstret == on             ###
### A: script.kitchen_light_100                   ###
###    script.cleaning_lights_on                  ###
###    script.harmony_tv                          ###
###    delay: '00:10:00'                          ###
###    script.goodnight_all                       ###
###    script.away_lights_on                      ###
#####################################################
  - alias: Ringklocka tänd allt lyse 1
    id: '8911372203282' 

    trigger:
      - platform: state
        entity_id: switch.ringklocka_tvattstuga
        to: 'on'
      - platform: state
        entity_id: switch.ringklocka_hall
        to: 'on'

    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: group.track_for_home_devices
          state: 'not_home'
        - condition: state
          entity_id: light.kok_lilla_fonstret
          state: 'on'

    action:
      - service: script.kitchen_light_100
      - service: script.cleaning_lights_on
      - service: script.harmony_tv
      - delay: '00:10:00'
      - service: script.goodnight_all
      - service: script.away_lights_on

#####################################################
### Ringklocka tänd allt lyse och tv 2            ###
### T: switch.ringklocka_tvattstuga == on         ###
###    switch.ringklocka_hall == on               ###
### C: group.track_for_home_devices == 'not_home' ###
###    light.kok_lilla_fonstret == on             ###
### A: script.kitchen_light_100                   ###
###    script.cleaning_lights_on                  ###
###    script.harmony_tv                          ###
###    delay: '00:10:00'                          ###
###    script.goodnight_all                       ###
#####################################################
  - alias: Ringklocka tänd allt lyse 2
    id: '9740747390258' 

    trigger:
      - platform: state
        entity_id: switch.ringklocka_tvattstuga
        to: 'on'
      - platform: state
        entity_id: switch.ringklocka_hall
        to: 'on'

    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: group.track_for_home_devices
          state: 'not_home'
        - condition: state
          entity_id: light.kok_lilla_fonstret
          state: 'off'

    action:
      - service: script.kitchen_light_100
      - service: script.cleaning_lights_on
      - service: script.harmony_tv
      - delay: '00:10:00'
      - service: script.goodnight_all

    #####################################################
    ### Stänger av ringklocka när ingen är hemma      ###
    ### T: group.track_for_home_devices to 'not_home' ###
    ### A: switch.ringklocka = off                    ###
    #####################################################
  - alias: Ringklocka off (-> borta)
    id: '5771075505803' 

    trigger:
      platform: state
      entity_id: group.track_for_home_devices
      to: 'not_home'

    action:
      - service: homeassistant.turn_off
        entity_id: switch.ringklocka

    #################################################
    ### Sätter på ringklocka när ingen är hemma   ###
    ### T: group.track_for_home_devices to 'home' ###
    ### A: switch.ringklocka = on                 ###
    #################################################
  - alias: Ringklocka on (-> hemma)
    id: '2421022434972' 

    trigger:
      platform: state
      entity_id: group.track_for_home_devices
      to: 'home'

    action:
      - service: homeassistant.turn_on
        entity_id: switch.ringklocka