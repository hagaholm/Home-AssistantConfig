    ####################################################
    ### Tänder lampor kl 09:00 om det är mörkt       ###
    ### T: Time = 09:00:00                           ###
    ### C: sensor.ljusstyrka < input_number.light_on ###
    ###    group.track_for_home_devices == 'home'    ###
    ### A: script.lights_on                          ###
    ####################################################
  - alias: Belysning on (=09:00:00, <1800, hemma)
    trigger:
      platform: time
      at: '09:00:00'
    condition:
      condition: and
      conditions:
        - condition: template
          value_template: "{{(states.sensor.ljusstyrka.state | int) < (states.input_number.light_on.state | int )}}"
        - condition: state
          entity_id: group.track_for_home_devices
          state: 'home'
    action:
      - service: script.lights_on

    ########################################################
    ### Tänder lampor när det blir mörkt fram till 22:00 ###
    ### T: sensor.ljusstyrka < input_number.light_on     ###
    ### C: group.track_for_home_devices == 'home'        ###
    ###    09:00:00 - 22:00:00                           ###
    ### A: script.lights_on                              ###
    ########################################################
  - alias: Belysning on (<1800, hemma)
    trigger:
      platform: template
      value_template: "{{(states.sensor.ljusstyrka.state | int) < (states.input_number.light_on.state | int )}}"
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: group.track_for_home_devices
          state: 'home'
        - condition: time
          after: '09:00:00'
          before: '22:00:00'
    action:
      - service: script.lights_on

    ########################################################
    ### Tänder lampor vid rörelse i köket övrigt tid     ###
    ### Används för att snabba på upptändning när första ###
    ### kommer hem innan status ändrats till 'hemma'     ###
    ### T: input_boolean.rorelsedetektor_kok_aktiv == on ###
    ### C: group.track_for_home_devices == 'not_home'    ###
    ###    sensor.ljusstyrka < input_number.light_on     ###
    ###    09:00:00 - 05:00:00                           ###
    ### A: script.lights_on                              ###
    ########################################################
  - alias: Belysning on (sensor on, borta, <1800)
    trigger:
      platform: state
      entity_id: input_boolean.rorelsedetektor_kok_aktiv
      to: 'on'
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: group.track_for_home_devices
          state: 'not_home'
        - condition: template
          value_template: "{{(states.sensor.ljusstyrka.state | int) < (states.input_number.light_on.state | int )}}"
        - condition: time
          after: '09:00:00'
          before: '05:00:00'
    action:
      - service: script.lights_on

    #####################################################
    ### Tänder lampor när första kommer hem övrig tid ###
    ### T: group.track_for_home_devices to 'home'     ###
    ### C: sensor.ljusstyrka < input_number.light_on  ###
    ###    09:00:00 - 05:00:00                        ###
    ### A: script.lights_on                           ###
    #####################################################
  - alias: Belysning on (-> hemma, <1800)
    trigger:
      platform: state
      entity_id: group.track_for_home_devices
      from: 'not_home'
      to: 'home'
    condition:
      condition: and
      conditions:
        - condition: template
          value_template: "{{(states.sensor.ljusstyrka.state | int) < (states.input_number.light_on.state | int )}}"
        - condition: time
          after: '09:00:00'
          before: '05:00:00'
    action:
      - service: script.lights_on

    ##########################################################
    ### Tänder lampor när fönsterbelysning i sovrum tänds  ###
    ### T: light.sovrum_fonster to 'on'                    ###
    ### C: input_select.inside_lights == 'Morgonbelysning' ###
    ###    05:00:00 - 09:00:00                             ###
    ### A: script.lights_on                                ###
    ##########################################################
  - alias: Belysning on (sovrumsfönster on)
    trigger:
      platform: state
      entity_id: light.sovrum_fonster
      to: 'on'
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: input_select.inside_lights
          state: 'Morgonbelysning'
        - condition: time
          after: '05:00:00'
          before: '09:00:00'
    action:
      - service: script.lights_on_morning

    ##########################################################
    ### Släcker lampor om det blir för ljust ute övrig tid ###
    ### T: sensor.ljusstyrka > input_number.light_off      ###
    ### C: group.track_for_home_devices = 'home'           ###
    ###    09:00:00 - 05:00:00                             ###
    ### A: script.lights_off                               ###
    ##########################################################
  - alias: Belysning off (>2500, hemma)
    trigger:
      platform: template
      value_template: "{{(states.sensor.ljusstyrka.state | int) > (states.input_number.light_off.state | int )}}"
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: group.track_for_home_devices
          state: 'home'
        - condition: time
          after: '09:00:00'
          before: '05:00:00'
    action:
      - service: script.lights_off

    ########################################################
    ### Släcker lampor när sista åker hemifrån övrig tid ###
    ### T: group.track_for_home_devices to 'not_home'    ###
    ### C: 09:00:00 - 05:00:00                           ###
    ### A: script.lights_off                             ###
    ########################################################
  - alias: Belysning off (-> borta)
    trigger:
      platform: state
      entity_id: group.track_for_home_devices
      from: 'home'
      to: 'not_home'
    condition:
      condition: time
      after: '09:00:00'
      before: '05:00:00'
    action:
      - service: script.lights_off

    #######################################################################
    ### Släcker lampor i sovrummet när fönsterbelysning i sovrum släcks ###
    ### T: light.sovrum_fonster to 'unavailable'                        ###
    ### C: light.sovrum_sangbord == on                                  ###
    ### A: light.bedroom = off                                          ###
    #######################################################################
  - alias: Bedroom off (sovrumsfönster off)
    trigger:
      platform: state
      entity_id: light.sovrum_fonster
      to: 'unavailable'
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: light.sovrum_sangbord
          state: 'on'
    action:
      - service: light.turn_off
        data:
          entity_id: light.sovrum
          transition: 2