    ############################################################
    ### Tänder lampor på morgonen vid rörelse i köket        ###
    ### T: input_boolean.rorelsedetektor_kok_aktiv == on     ###
    ### C: sensor.ljusstyrka < input_number.morning_light_on ###
    ###    light.morgonbelysning == off                      ###
    ###    05:00:00 - 09:00:00                               ###
    ### A: input_select.light_inside = Morgonbelysning       ###
    ############################################################
  - alias: Morgonbelysning on (sensor on, <1800)
    mode: queued

    trigger:
      platform: state
      entity_id: input_boolean.rorelsedetektor_kok_aktiv
      to: 'on'

    condition:
      condition: and
      conditions:
        - condition: template
          value_template: "{{(states('sensor.ljusstyrka') | int) < (states('input_number.morning_light_on') | int )}}"
        - condition: state
          entity_id: input_select.light_inside
          state: 'Släckt'
        - condition: time
          after: '05:00:00'
          before: '09:00:00'

    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.light_inside
          option: Morgonbelysning

    ############################################################
    ### Tänder lampor när första kommer hem på förmiddagen   ###
    ### T: group.track_for_home_devices to: 'home'           ###
    ### C: sensor.ljusstyrka < input_number.morning_light_on ###
    ###    05:00:00 - 09:00:00                               ###
    ### A: input_select.light_inside = Morgonbelysning       ###
    ############################################################
  - alias: Morgonbelysning on (-> hemma, <1800)
    mode: single

    trigger:
      platform: state
      entity_id: group.track_for_home_devices
      from: 'not_home'
      to: 'home'

    condition:
      condition: and
      conditions:
        - condition: template
          value_template: "{{(states('sensor.ljusstyrka') | int) < (states('input_number.morning_light_on') | int )}}"
        - condition: time
          after: '05:00:00'
          before: '09:00:00'

    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.light_inside
          option: Morgonbelysning

    #############################################################
    ### Släcker lampor på förmiddagen när det blir ljust ute  ###
    ### T: sensor.ljusstyrka > input_number.morning_light_off ###
    ### C: group.track_for_home_devices == 'home'             ###
    ###    05:00:00 - 09:00:00                                ###
    ### A: input_select.light_inside = Släckt                 ###
    #############################################################
  - alias: Morgonbelysning off (>2500, hemma)
    mode: single

    trigger:
      platform: template
      value_template: "{{(states('sensor.ljusstyrka') | int) > (states('input_number.morning_light_off') | int )}}"

    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: group.track_for_home_devices
          state: 'home'
        - condition: time
          after: '05:00:00'
          before: '09:00:00'

    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.light_inside
          option: Släckt

    #############################################################
    ### Släcker lampor på förmiddagen när sista åker hemifrån ###
    ### T: group.track_for_home_devices to: 'not_home'        ###
    ### C: 05:00:00 - 09:00:00                                ###
    ### A: input_select.light_inside = Släckt                 ###
    #############################################################
  - alias: Morgonbelysning off (-> borta)
    mode: single

    trigger:
      platform: state
      entity_id: group.track_for_home_devices
      from: 'home'
      to: 'not_home'

    condition:
      condition: time
      after: '05:00:00'
      before: '09:00:00'

    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.light_inside
          option: Släckt
