default_config:

####################################################
#                                                  #
#                 HOME ASSISTANT                   #
#                                                  #
####################################################
# https://home-assistant.io/docs/configuration/basic/

homeassistant:
  # Name of the location where Home Assistant is running
  name: Home
  # Location required to calculate the time the sun rises and sets
  latitude: !secret latitude
  longitude: !secret longitude
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: 34
  # Country in which Home Assistant is running
  country: SE
  # metric for Metric, imperial for Imperial
  unit_system: metric
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: !secret time_zone
  # Customization file
  customize: !include customize.yaml
  # Package folder
  packages: !include_dir_named packages

  allowlist_external_dirs:
    - /config
    - /config/camera
    - /config/camera/deepstack_photo 
    - /config/camera/motion_detected 

    - /media/animal
    - /media/Away
    - /media/Day
    - /media/Night
    - /media/video/Away    
    - /media/video/Night

    
####################################################
#                                                  #
#                     GENERAL                      #
#                                                  #
####################################################
api:

# https://www.home-assistant.io/integrations/folder_watcher/
folder_watcher:
  - folder: /config/camera/deepstack_photo
    patterns:
      - '*.jpg'

# https://www.home-assistant.io/components/system_health/
system_health:

#---------------------------------------------------
# Show links to resources in log and frontend
#introduction:

#---------------------------------------------------
# Enables the frontend
frontend:

#---------------------------------------------------
# Enables configuration UI
# https://home-assistant.io/components/config/
config:

#---------------------------------------------------
# http
# https://home-assistant.io/components/http/
http:
#  api_password: !secret http_password
#temp:  ip_ban_enabled: True
#temp:  login_attempts_threshold: 3

#---------------------------------------------------
# Checks for available updates
# Note: This component will send some information about your system to
# the developers to assist with development of Home Assistant.
# For more information, please see:
# https://home-assistant.io/blog/2016/10/25/explaining-the-updater/
#The updater integration has been deprecated and will be removed in 2022.5, please remove it from your configuration
#updater:
  # Optional, allows Home Assistant developers to focus on popular components.
  # include_used_components: true

#---------------------------------------------------
# Discover some devices automatically
discovery:

#---------------------------------------------------
# Allows you to issue voice commands from the frontend in enabled browsers
conversation:

#---------------------------------------------------
# Enables a map showing the location of tracked devices
#map:

#---------------------------------------------------
# Track the sun
# https://home-assistant.io/components/sun/
sun:

#---------------------------------------------------
# Notifier
#https://home-assistant.io/components/notify.pushetta/
# Needs to be reoved before 2023.2.0
#notify:
#  name: pushbullet
#  platform: pushbullet
#  api_key: !secret pushbullet_api_key

#  name: pushetta
#  platform: pushetta
#  channel_name: !secret pushetta_channel_name
#  api_key: !secret pushetta_api_key

# Downloader
# https://www.home-assistant.io/integrations/downloader/
# Not used right now
downloader:
  download_dir: /config/www

color_extractor:

####################################################
#                                                  #
#                      LOGGING                     #
#                                                  #
####################################################
recorder: !include logging/recorder.yaml
history: !include logging/history.yaml
logbook: !include logging/logbook.yaml
logger: !include logging/logger.yaml

###################################################
#                                                 #
#                     lovelace                    #
#                                                 #
###################################################
# https://www.home-assistant.io/lovelace/yaml-mode/
lovelace:
  mode: storage
#  mode: yaml

  # Add more dashboards
  dashboards:
    # Standard
    lovelace-standard:
      mode: yaml
      title: Standard
      show_in_sidebar: true
      filename: ui-lovelace.yaml

    # Automation
    lovelace-automation:
      mode: yaml
      title: Automation
      show_in_sidebar: true
      filename: ui-automation.yaml

    # Ventilaton
    lovelace-ventilation:
      mode: yaml
      title: Ventilation
      show_in_sidebar: true
      filename: ui-ventilation.yaml


    # Generated
    lovelace-generated: # Needs to contain a hyphen (-)
      mode: yaml
      filename: notexist.yaml
      title: Generated
      icon: mdi:tools
      show_in_sidebar: false
      require_admin: true

####################################################
#                                                  #
#      LINKS TO INDIVUAL CONFIGURATION FILES       #
#                                                  #
####################################################

# https://home-assistant.io/docs/configuration/splitting_configuration/

#---------------------------------------------------
automation: !include_dir_merge_list automations/
#---------------------------------------------------
# device_tracker: !include device_trackers.yaml
#---------------------------------------------------
sensor: !include_dir_merge_list sensor
#---------------------------------------------------
group: !include_dir_merge_named group
#---------------------------------------------------
script: !include_dir_merge_named script
#---------------------------------------------------

####################################################
#                                                  #
#                    TELLSTICK                     #
#                                                  #
####################################################
tellstick:
  host: core-tellstick
  port: [50800, 50801]
  signal_repetitions: 3

####################################################
#                                                  #
#                     COVER                        #
#                                                  #
####################################################
cover:
  - platform: tellstick

####################################################
#                                                  #
#                     LIGHT                        #
#                                                  #
####################################################
light:
  - platform: template
    lights:
      cam_1_color:
        friendly_name: "Cam 1 color"
        turn_on:
        turn_off:
        set_level:
        set_temperature:
        set_color:
      cam_2_color:
        friendly_name: "Cam 2 color"
        turn_on:
        turn_off:
        set_level:
        set_temperature:
        set_color:
      cam_3_color:
        friendly_name: "Cam 3 color"
        turn_on:
        turn_off:
        set_level:
        set_temperature:
        set_color:
      cam_4_color:
        friendly_name: "Cam 4 color"
        turn_on:
        turn_off:
        set_level:
        set_temperature:
        set_color:


  - platform: tellstick

#  - platform: switch
#    name: Louise fönster
#    entity_id: switch.louise_fonster
  - platform: switch
    name: Louise skrivbord
    entity_id: switch.louise_skrivbord
  - platform: switch
    name: Andreas fönster
    entity_id: switch.andreas_fonster
#  - platform: switch
#    name: Friggebod fönster
#    entity_id: switch.friggebod_fonster
  - platform: switch
    name: Friggebod ute
    entity_id: switch.friggebod_ute
#  - platform: switch
#    name: Hall skåp
#    entity_id: switch.hall_skap
  - platform: switch
    name: Kök lilla fönstret
    entity_id: switch.kok_lilla_fonstret
  - platform: switch
    name: Kök stora fönstret ljusstake
    entity_id: switch.kok_stora_fonstret_ljusstake
  - platform: switch
    name: Sovrum sängbord
    entity_id: switch.sovrum_sangbord
#  - platform: switch
#    name: Uterum fönster
#    entity_id: switch.uterum_fonster
  - platform: switch
    name: Uterum fotogenlampa
    entity_id: switch.uterum_fotogenlampa
  - platform: switch
    name: Uterum led
    entity_id: switch.uterum_led
  - platform: switch
    name: Vardagsrum vitrinskåp
    entity_id: switch.vardagsrum_vitrinskap
  - platform: switch
    name: Vardagsrum gran
    entity_id: switch.vardagsrum_gran

  - platform: switch
    name: Vardagsrum fönster ljusstake
    entity_id: switch.vardagsrum_fonster_ljusstake
  - platform: switch
    name: Uterum julstjärnor
    entity_id: switch.uterum_julstjarnor

#  - platform: switch
#    name: Andreas fönster julstjärna
#    entity_id: switch.andreas_fonster_julstjarna
 
#  - platform: switch
#    name: Trädgård
#    entity_id: switch.tradgard

# Light group
# https://www.home-assistant.io/integrations/light.group/
 
  - platform: group
    name: Dagbelysning
    entities:
      - light.kok_stora_fonstret
      - light.kok_lilla_fonstret
      - light.hall_byra
      - light.hall_skap
      - light.vardagsrum_fonster
      - light.vardagsrum_skank
      - light.vardagsrum_vagn
      - light.vardagsrum_vitrinskap
      - light.sovrum_fonster
      - light.sovrum_sangbord
      - light.andreas_fonster_2
      - light.louise_fonster
      - light.louise_golvlampa
      - light.uterum_fonster

  - platform: group
    name: Dagbelysning jul
    entities:
      - light.kok_stora_fonstret_ljusstake #jul
      - light.kok_lilla_fonstret
      - light.hall_byra
      - light.hall_skap
      - light.vardagsrum_fonster_ljusstake_2 #jul
      - light.vardagsrum_skank
      - light.vardagsrum_vagn
      - light.vardagsrum_vitrinskap
      - light.vardagsrum_gran
      - light.sovrum_fonster
      - light.sovrum_sangbord
      - light.andreas_fonster
      - light.louise_fonster
      - light.louise_golvlampa
#jul      - light.louise_fonster_dimmer_julstjarna
      - light.uterum_fonster
      - light.uterum_julstjarnor #jul

  - platform: group
    name: Köksbelysning
    entities:
      - light.kok_underskap_bank
      - light.kok_underskap_diskbank
      - light.kok_vitrinskap

  - platform: group
    name: Morgonbelysning
    entities:
      - light.kok_stora_fonstret
      - light.kok_lilla_fonstret
      - light.hall_byra
      - light.vardagsrum_fonster
      - light.uterum_fonster

  - platform: group
    name: Morgonbelysning jul
    entities:
      - light.kok_stora_fonstret_ljusstake #jul
      - light.kok_lilla_fonstret
      - light.hall_byra
      - light.vardagsrum_fonster_ljusstake_2 #jul
      - light.vardagsrum_gran
      - light.uterum_fonster
      - light.uterum_julstjarnor #jul

  - platform: group
    name: Nattbelysning
    entities:
      - light.hall_byra
      - light.vardagsrum_fonster

  - platform: group
    name: Nattbelysning jul
    entities:
      - light.hall_byra
      - light.vardagsrum_fonster_ljusstake_2 #jul

  - platform: group
    name: Fasadbelysning
    entities:
      - light.huvudentre
      - light.tvattstuga_fasad
      - light.forrad_fasad
      - light.friggebod_fasad

  - platform: group
    name: Utebelysning
    entities:
#      - switch.friggebod_fonster
      - light.friggebod_ute
      - light.spabad_vagg
      - light.spabad_vanster
      - light.spabad_mitten
      - light.spabad_hoger

  - platform: group
    name: Bortabelysning
    entities:
      - light.kok_stora_fonstret
      - light.kok_lilla_fonstret
      - light.hall_byra
      - light.vardagsrum_fonster
      - light.sovrum_sangbord
      - light.louise_fonster
      - light.uterum_fonster

  - platform: group
    name: Bortabelysning jul
    entities:
      - light.kok_stora_fonstret_ljusstake #jul
      - light.kok_lilla_fonstret
      - light.hall_byra
      - light.vardagsrum_fonster_ljusstake_2 #jul
      - light.sovrum_sangbord
      - light.louise_fonster
#jul      - light.louise_fonster_dimmer_julstjarna
      - light.uterum_fonster
      - light.uterum_julstjarnor #jul


  - platform: group
    name: Sovrum
    entities:
      - light.sovrum_sangbord
      - light.sovrum_fonster

  - platform: group
    name: Hall
    entities:
      - light.hall_byra
      - light.hall_skap

  - platform: group
    name: Vardagsrum
    entities:
      - light.vardagsrum_fonster
      - light.vardagsrum_skank
      - light.vardagsrum_vagn
      - light.vardagsrum_vitrinskap
      - light.vardagsrum_gran

  - platform: group
    name: Vardagsrum jul
    entities:
      - light.vardagsrum_fonster_ljusstake_2 #jul
      - light.vardagsrum_skank
      - light.vardagsrum_vagn
      - light.vardagsrum_vitrinskap
      - light.vardagsrum_gran

  - platform: group
    name: Kök
    entities:
      - light.kok_stora_fonstret
      - light.kok_lilla_fonstret

  - platform: group
    name: Kök jul
    entities:
      - light.kok_stora_fonstret_ljusstake #jul
      - light.kok_lilla_fonstret

  - platform: group
    name: Louise rum
    entities:
      - light.louise_fonster
      - light.louise_golvlampa

  - platform: group
    name: Andreas rum
    entities:
      - light.andreas_fonster_2

  - platform: group 
    name: Andreas rum jul
    entities:
      - light.andreas_fonster

  - platform: group
    name: Uterum
    entities:
      - light.uterum_led
      - light.uterum_fonster
      - light.uterum_fotogenlampa

  - platform: group
    name: Uterum jul 
    entities:
      - light.uterum_led
      - light.uterum_fonster
      - light.uterum_julstjarnor #jul
      - light.uterum_fotogenlampa

####################################################
#                                                  #
#                     SWITCH                       #
#                                                  #
####################################################
switch:
  - platform: tellstick

####################################################
#                                                  #
#                TEXT TO SPEECH                    #
#                                                  #
####################################################
tts:
  - platform: google_translate

####################################################
#                                                  #
#                  MEDIA PLAYER                    #
#                                                  #
####################################################
media_player:
  - platform: yamaha
    host: 192.168.1.24

####################################################
#                                                  #
#                    CLOUD                         #
#                                                  #
####################################################
#cloud:

####################################################
#                                                  #
#                 EMULATED HUE                     #
#                                                  #
####################################################
#emulated_hue:

####################################################
#                                                  #
#                 EMULATED HUE                     #
#                                                  #
####################################################
#emulated_roku:
#  host_ip: 192.168.1.14 # should be set to Home Assistant's address
##  advertise_ip: 10.0.0.10 # optional, defaults to host_ip if not specified
##  upnp_bind_multicast: True # optional, defaults to True
#  listen_ports:
#    - 8060
#emulated_roku:
#  servers:
#    - name: Home Assistant
#      listen_port: 8060

####################################################
#                                                  #
#                      OPEN UV                     #
#                                                  #
####################################################
#openuv:
#  api_key: !secret open_uv_api_key

####################################################
#                                                  #
#                  PYTHON_SCRIPT                   #
#                                                  #
####################################################
# https://www.home-assistant.io/components/python_script/
python_script:

####################################################
#                                                  #
#                     WORKDAY                      #
#                                                  #
####################################################
binary_sensor:
  - platform: workday
    country: SE
    name: workday_today

  - platform: workday
    country: SE
    name: workday_tomorrow
    days_offset: 1

#  - platform: template
#    sensors:
#      workday_light:
#        value_template: '{% if is_state("binary_sensor.workday_today", "on") and is_state("binary_sensor.workday_tomorrow", "on") %}on{% else %}on{% endif %}'

####################################################
#                                                  #
#                     INPUT_BOOLEAN                #
#                                                  #
####################################################
input_boolean:
  christmas_light:
    name: Använd julbelysning
    icon: mdi:pine-tree

  rorelsedetektor_kok_aktiv:
    name: Rörelsedetektor kök aktiv
    initial: off

####################################################
#                                                  #
#                     INPUT_SELECT                 #
#                                                  #
####################################################
input_select:
  light_inside:
    name: Innebelysning
    options:
     - Släckt
     - Morgonbelysning
     - Förmiddagsbelysning
     - Dagbelysning
     - Kvällsbelysning
     - Nattbelysning
     - Bortabelysning
     - Arbetsbelysning
     - Fönsterbelysning
    icon: mdi:lightbulb

  light_kitchen:
    name: Köksbelysning
    options:
     - Släckt
     - 25%
     - 100%
    icon: mdi:lightbulb

  light_uterum:
    name: Uterumsbelysing
    options:
     - Släckt
     - Tänt
    icon: mdi:lightbulb

  facade_lights: 
    name: Fasadbelysning 
    options: 
     - Släckt 
     - Normal 
     - Utökat 
     - Natt 
     - Max
    icon: mdi:lightbulb 
     
  light_garden: 
    name: Trädgårdsbelysning 
    options: 
     - Släckt 
     - Tänt 
    icon: mdi:lightbulb 

  light_outside:
    name: Utebelysning
    options:
     - Släckt
     - Tänt
    icon: mdi:lightbulb

  home_status:
    name: Hemma status
    options:
     - Borta
     - Hemma på # Betyder: vaken
     - Hemma av # Betyder: sover

####################################################
#                                                  #
#                     INPUT_NUMBER                 #
#                                                  #
####################################################
# input_number:
  # facade_light_on:
    # name: Fasad belysning on
    # initial: 40
    # min: 1
    # max: 100
    # step: 1
    # mode: box
  # facade_light_off:
    # name: Fasad belysning off
    # initial: 60
    # min: 1
    # max: 100
    # step: 1
    # mode: box

####################################################
#                                                  #
#                       ASUSWRT                    #
#                                                  #
####################################################
#asuswrt:
#    host: 192.168.1.1
#    username: admin
#    password: !secret asuswrt_password
##    ssh_key: /config/ssh/asuswrt
##    sensors:
##    - upload
##    - download
##    - upload_speed
##    - download_speed

####################################################
#                                                  #
#                       MQTT                       #
#                                                  #
####################################################
# Add broker used on Raspberry Pi 3B used for lux values
# https://www.home-assistant.io/docs/mqtt/broker/
mqtt:
#  broker: localhost
#  port: 1883
#  username: !secret mqtt_broker_username
#  password: !secret mqtt_broker_password

########
# mqtt #
########
  sensor:
    - state_topic: "hassbian/tsl2591/lux_calibrated"
      name: Ljusstyrka
      unit_of_measurement: "lx"
  # - platform: mqtt
    # name: Ljusstyrka2
    # state_topic: "hassbian/tsl2591/lux_5"
    # unit_of_measurement: "lx"
  # - platform: mqtt
    # name: Infrarött ljus
    # state_topic: "hassbian/tsl2591/infrared"
    # unit_of_measurement: ""
  # - platform: mqtt
    # name: Synligt ljus
    # state_topic: "hassbian/tsl2591/visible"
    # unit_of_measurement: ""
  # - platform: mqtt
    # name: Fullt spectrum ljus
    # state_topic: "hassbian/tsl2591/full_spectrum"
    # unit_of_measurement: ""

####################################################
#                                                  #
#                  VOLVO ON CALL                   #
#                                                  #
####################################################
# https://www.home-assistant.io/integrations/volvooncall/
#volvooncall:
#  username: !secret voc_username
#  password: !secret voc_password

####################################################
#                                                  #
#                    POWERCALC                     #
#                                                  #
####################################################
# https://github.com/bramstroker/homeassistant-powercalc
powercalc:

####################################################
#                                                  #
#            END OF CONFIGURATION FILE             #
#                                                  #
####################################################
